{% extends 'blog/base.html' %}
{% block title %}Verify Email{% endblock %}

{% block content %}
<style>
    .otp-card {
        border-radius: 16px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        animation: fadeInUp 0.5s ease;
    }

    .otp-input {
        text-align: center;
        letter-spacing: 8px;
        font-size: 1.5rem;
        font-weight: 600;
    }

    .btn-verify {
        border-radius: 12px;
        font-weight: 600;
        padding: 12px;
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(15px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
</style>

<div class="row justify-content-center align-items-center" style="min-height: 75vh;">
    <div class="col-md-5 col-lg-4">
        <div class="card otp-card p-4">

            <div class="text-center mb-4">
                <h4 class="fw-bold">Verify Your Email</h4>
                <p class="text-muted small mb-0">
                    Enter the 6-digit code sent to your email
                </p>
            </div>

            {% if error %}
                <div class="alert alert-danger text-center py-2">
                    {{ error }}
                </div>
            {% endif %}

            <form method="POST" id="otpForm">
                {% csrf_token %}

                <div class="mb-4">
                    <input
                        type="text"
                        name="otp"
                        maxlength="6"
                        class="form-control otp-input"
                        placeholder="••••••"
                        required
                        autofocus
                    >
                </div>

                <button
                    type="submit"
                    id="verifyBtn"
                    class="btn btn-primary btn-verify w-100 d-flex align-items-center justify-content-center gap-2"
                >
                    <span id="verifyText">Verify Email</span>
                    <span
                        id="verifySpinner"
                        class="spinner-border spinner-border-sm d-none"
                        role="status"
                        aria-hidden="true"
                    ></span>
                </button>
            </form>

            <!-- <div class="text-center mt-3">
                <small class="text-muted">
                    Didn’t receive the code? <a href="#">Resend OTP</a>
                </small>
            </div> -->

        </div>
    </div>
</div>

<script>
    const otpForm = document.getElementById("otpForm");
    const verifyBtn = document.getElementById("verifyBtn");
    const verifyText = document.getElementById("verifyText");
    const verifySpinner = document.getElementById("verifySpinner");

    otpForm.addEventListener("submit", () => {
        verifyBtn.disabled = true;
        verifySpinner.classList.remove("d-none");
        verifyText.textContent = "Verifying...";
    });
</script>
{% endblock %}
